<!DOCTYPE html>
<!-- saved from url=(0238)http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#1reactivecocoa?? -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width initial-scale=1.0">
  <title>Markdown Preview</title>
  <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgo=">
  <link rel="stylesheet" href="./Markdown Preview_files/markdown-preview-c6edad620f.min.css">
  <script src="./Markdown Preview_files/markdown-preview-4130bfdbe4.min.js"></script>
  <script src="./Markdown Preview_files/preview-8860ba726a.js"></script>
</head>
<body>
  <article class="markdown-body"><h1 id="目录" data-source-line="1"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#目录"></a>目录</h1>
<p data-source-line="3">
</p><ul class="toc">
  <li>
    <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#目录">目录</a>
  </li>
  <li>
    <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#1reactivecocoa简介">1.ReactiveCocoa简介</a>
  </li>
  <li>
    <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#2mvvm-架构">2.MVVM 架构</a>
    <ul>
      <li>
        <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#mvc">MVC</a>
      </li>
      <li>
        <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#mvvm">MVVM</a>
        <ul>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#定义">定义：</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#view-model-实例">View-Model 实例</a>
            <ul>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#我们的-view-model-头文件应该长这样">我们的 view-model 头文件应该长这样:</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#view-model-不做的事儿">view-model 不做的事儿</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#视图控制器从-view-model-获取的数据将用来">视图控制器从 view-model 获取的数据将用来:</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#视图控制器将对-view-model-起如下作用">视图控制器将对 view-model 起如下作用:</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#视图控制器不做的事儿">视图控制器不做的事儿:</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#介绍-reactivecocoa">介绍 ReactiveCocoa</a>
    <ul>
      <li>
        <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#1-racsignal">1 .RACSignal</a>
        <ul>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#定义-2">定义：</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明">说明:</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码">代码</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#注意事项">注意事项</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#初始化方法">初始化方法</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#2-racsubject">2 .RACSubject</a>
        <ul>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#定义-3">定义</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明-2">说明</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-2">代码</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代替代理的场景">代替代理的场景</a>
            <ul>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#oneviewcontroller-中代码">OneViewController 中代码：</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#twoviewcontroller-中的代码">TwoViewController 中的代码</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#注意">注意</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#3-racreplaysubject">3 . RACReplaySubject</a>
        <ul>
          <li>
            <ul>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#定义-4">定义：</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明-3">说明 ：</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-3">代码</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#4-racmulticastconnection">4 . RACMulticastConnection</a>
        <ul>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#定义-5">定义</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明-4">说明</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-4">代码</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#注意-2">注意</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#5-raccommand">5 .RACCommand</a>
        <ul>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#定义-6">定义 ：</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明-5">说明</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-5">代码</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#注意-3">注意</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#6-others">6 . others</a>
        <ul>
          <li>
            <ul>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#1-ractuple元组类">1. RACTuple:元组类</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#2-racsequence集合类">2. RACSequence:集合类</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#3-racscheduler">3. RACScheduler</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#4-racevent">4. RACEvent</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#4-racunit">4. RACUnit</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#实例代码">实例代码</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#7-rac-常用方法">7 . RAC 常用方法</a>
        <ul>
          <li>
            <ul>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#1-rac_signalforselector">1. rac_signalForSelector</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#2-rac_valuesandchangesforkeypath">2. rac_valuesAndChangesForKeyPath</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#3-rac_signalforcontrolevents">3. rac_signalForControlEvents</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#4-rac_addobserverforname">4. rac_addObserverForName</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#5-rac_textsignal">5. rac_textSignal</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#6-rac_liftselectorwithsignalsfromarraysignals">6. rac_liftSelector:withSignalsFromArray:Signals:</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#7-map-和-flattenmap-映射">7. map 和 flattenMap （映射）</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#8-racsignal常见操作方法">8 . RACSignal常见操作方法</a>
        <ul>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#1-concat">1. concat :</a>
            <ul>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-6">代码：</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明-6">说明：</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#2-then">2. then :</a>
            <ul>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-7">代码</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明-7">说明</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#3-merge">3. merge ：</a>
            <ul>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-8">代码</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#4-zipwith">4. zipWith:</a>
            <ul>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#把2个信号合并成一个信号2个信号都发送时zip信号才会发送消息">把2个信号合并成一个信号，2个信号都发送时，zip信号才会发送消息。</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#5-combinelatest">5. combineLatest:</a>
            <ul>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-9">代码</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明-8">说明</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#6-reduce">6. reduce:</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#7-filter">7. filter ：</a>
            <ul>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-10">代码</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#8-ignore">8. ignore ：</a>
            <ul>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-11">代码</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#9-distinctuntilchanged">9. distinctUntilChanged</a>
            <ul>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-12">代码</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#10-taketakelast">10. take/takeLast</a>
            <ul>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-13">代码</a>
              </li>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明-9">说明</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#11-skip">11. skip</a>
            <ul>
              <li>
                <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-14">代码</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#9-rac-常用的宏">9 .RAC 常用的宏</a>
        <ul>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#1-ractarget">1. RAC(TARGET, ...)</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#2racobservetarget-keypath">2.RACObserve(&lt;#TARGET#&gt;, &lt;#KEYPATH#&gt;)</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#3-weakifyself和strongifyself">3. @weakify(self)和@strongify(self)</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#4-ractuplepack-ractupleunpack">4. RACTuplePack(...) /  RACTupleUnpack(...)</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#reactive-50-更新">Reactive 5.0 更新</a>
    <ul>
      <li>
        <ul>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#reactivecocoa">ReactiveCocoa</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#reactiveswift">ReactiveSwift</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#reactiveobjc">ReactiveObjC</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#reactiveobjcbridge">ReactiveObjCBridge</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#大量的api的改变和重命名">大量的Api的改变和重命名。</a>
          </li>
          <li>
            <a href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#最后">最后 ？</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<p></p>
<h1 id="1reactivecocoa简介" data-source-line="5"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#1reactivecocoa简介"></a>1.ReactiveCocoa简介</h1>
<p data-source-line="8">ReactiveCocoa（简称为RAC）,是由Github开源的一个应用于iOS和OS开发的新框架:<a href="https://github.com/ReactiveCocoa/ReactiveCocoa">https://github.com/ReactiveCocoa/ReactiveCocoa</a></p>
<p data-source-line="10">ReactiveCocoa是一个高度抽象的编程框架，它真的很抽象，初看你不知道它是要干嘛的，等你用上了之后，就发现，有了它你是想干嘛就干嘛，编码从未如此流畅。它就像中国的太极，太极生两仪，两仪生四象，四象生八卦，八卦生万物。(ps:这话不是我说的 😯)</p>
<h1 id="2mvvm-架构" data-source-line="12"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#2mvvm-架构"></a>2.MVVM 架构</h1>
<p data-source-line="14">（参考：<a href="http://www.sprynthesis.com/2014/12/06/reactivecocoa-mvvm-introduction/%EF%BC%89">http://www.sprynthesis.com/2014/12/06/reactivecocoa-mvvm-introduction/）</a></p>
<h2 id="mvc" data-source-line="16"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#mvc"></a>MVC</h2>
<p data-source-line="19">任何一个正经开发过一阵子软件的人都熟悉MVC，它意思是Model View Controller, 是一个在复杂应用设计中组织代码的公认模式. 它也被证实在 iOS 开发中有着第二种含义: Massive View Controller(重量级视图控制器)。它让许多程序员绞尽脑汁如何去使代码被解耦和组织地让人满意. 总的来说得出结论: 他们需要给视图控制器瘦身, 并进一步分离业务逻辑;</p>
<h2 id="mvvm" data-source-line="21"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#mvvm"></a>MVVM</h2>
<p data-source-line="24">于是MVVM流行起来, 它代表Model View View-Model, 它在这帮助我们创建更易处理, 更佳设计的代码.</p>
<h3 id="定义" data-source-line="26"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#定义"></a>定义：</h3>
<ol data-source-line="28">
<li>
<p><strong>Model</strong>： 在 MVVM 中没有真正的变化. 取决于你的偏好, 你的 model 可能会或可能不会封装一些额外的业务逻辑工作。</p>
</li>
<li>
<p><strong>View</strong> ：包含实际 UI 本身(不论是 UIView 代码, storyboard 和 xib), 任何视图特定的逻辑, 和对用户输入的反馈. 在 iOS 中这不仅需要 UIView 代码和那些文件, 还包括很多需由 UIViewController 处理的工作。</p>
</li>
<li>
<p><strong>View-Model</strong> ：这个术语本身会带来困惑, 因为它混搭了两个我们已知的术语, 但却是完全不同的东东.  它的职责之一就是作为一个表现视图显示自身所需数据的静态模型;但它也有收集, 解释和转换那些数据的责任. 这留给了 view (controller) 一个更加清晰明确的任务: 呈现由 view-model 提供的数据。（说白了就是数据的请求，到模型化再到解释到view）</p>
</li>
</ol>
<p data-source-line="34">也许你有注意到没有控制器：我们并没有真的去除视图控制器的概念或抛弃 “controller” 术语来匹配 MVVM。我们正要将重合的那块工作剥离到 view-model 中, 并让视图控制器的生活更加简单。</p>
<p data-source-line="36"><img src="./Markdown Preview_files/1432542301497557.gif" alt="image"></p>
<h3 id="view-model-实例" data-source-line="38"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#view-model-实例"></a>View-Model 实例</h3>
<h4 id="我们的-view-model-头文件应该长这样" data-source-line="41"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#我们的-view-model-头文件应该长这样"></a>我们的 view-model 头文件应该长这样:</h4>
<pre data-source-line="43"><code class="hljs"><span class="hljs-comment">//MYTwitterLookupViewModel.h</span>
<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">MYTwitterLookupViewModel</span>: <span class="hljs-title">NSObject</span></span>
  
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">assign</span>, <span class="hljs-keyword">readonly</span>, getter=isUsernameValid) <span class="hljs-built_in">BOOL</span> usernameValid;
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">strong</span>, <span class="hljs-keyword">readonly</span>) <span class="hljs-built_in">NSString</span> *userFullName;
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">strong</span>, <span class="hljs-keyword">readonly</span>) <span class="hljs-built_in">UIImage</span> *userAvatarImage;
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">strong</span>, <span class="hljs-keyword">readonly</span>) <span class="hljs-built_in">NSArray</span> *tweets;
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">assign</span>, <span class="hljs-keyword">readonly</span>) <span class="hljs-built_in">BOOL</span> allTweetsLoaded;
  
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">strong</span>, <span class="hljs-keyword">readwrite</span>) <span class="hljs-built_in">NSString</span> *username;
  
- (<span class="hljs-keyword">void</span>) getTweetsForCurrentUsername;
- (<span class="hljs-keyword">void</span>) loadMoreTweets;</code></pre><p data-source-line="59">相当直截了当的填充. 注意到这些壮丽的 readonly 属性了么?这个 view-model 暴漏了视图控制器所必需的最小量信息, 视图控制器实际上并不在乎 view-model 是如何获得这些信息的. 现在我们两者都不在乎. 仅仅假定你习惯于标准的网络服务请求, 校验, 数据操作和存储.</p>
<h4 id="view-model-不做的事儿" data-source-line="61"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#view-model-不做的事儿"></a>view-model 不做的事儿</h4>
<p data-source-line="63">对视图控制器以任何形式直接起作用或直接通告其变化
View Controller(视图控制器)</p>
<h4 id="视图控制器从-view-model-获取的数据将用来" data-source-line="66"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#视图控制器从-view-model-获取的数据将用来"></a>视图控制器从 view-model 获取的数据将用来:</h4>
<ol data-source-line="68">
<li>当 usernameValid 的值发生变化时触发 “Go” 按钮的 enabled 属性</li>
<li>当 usernameValid 等于 NO 时调整按钮的 alpha 值为0. 5(等于 YES 时设为1. 0)</li>
<li>更新 UILable 的 text 属性为字符串 userFullName 的值</li>
<li>更新 UIImageView 的 image 属性为 userAvatarImage 的值</li>
<li>用 tweets 数组中的对象设置表格视图中的 cell (后面会提到)</li>
<li>当滑到表格视图底部时如果 allTweetsLoaded 为 NO, 提供一个 显示 “loading” 的 cell</li>
</ol>
<h4 id="视图控制器将对-view-model-起如下作用" data-source-line="75"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#视图控制器将对-view-model-起如下作用"></a>视图控制器将对 view-model 起如下作用:</h4>
<ol data-source-line="77">
<li>每当 UITextField 中的文本发生变化, 更新 view-model 上仅有的 readwrite 属性 username</li>
<li>当 “Go” 按钮被按下时调用 view-model 上的 getTweetsForCurrentUsername 方法</li>
<li>当到达表格中的 “loading” cell 时调用 view-model 上的 loadMoreTweets 方法</li>
</ol>
<h4 id="视图控制器不做的事儿" data-source-line="81"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#视图控制器不做的事儿"></a>视图控制器不做的事儿:</h4>
<ol data-source-line="83">
<li>发起网络服务调用</li>
<li>管理 tweets 数组</li>
<li>判定 username 内容是否有效</li>
<li>将用户的姓和名格式化为全名</li>
<li>下载用户头像并转成 UIImage(如果你习惯在 UIImageView 上使用类别从网络加载图片, 你可以暴漏 URL 而不是图片. 这样没有让 view-model 和 UIKit 更完全摆脱, 但我视 UIImage 为数据而非数据的确切显示. 这些东西不是固定死的. )</li>
</ol>
<p data-source-line="89"><mark>注意</mark>: 视图控制器总的责任是处理 view-model 中的变化.</p>
<h1 id="介绍-reactivecocoa" data-source-line="91"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#介绍-reactivecocoa"></a>介绍 ReactiveCocoa</h1>
<h2 id="1-racsignal" data-source-line="94"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#1-racsignal"></a>1 .RACSignal</h2>
<h3 id="定义-2" data-source-line="96"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#定义-2"></a>定义：</h3>
<p data-source-line="97">信号类,一般表示将来有数据传递，只要有数据改变，信号内部接收到数据，就会马上发出数据。</p>
<h3 id="说明" data-source-line="99"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明"></a>说明:</h3>
<ol data-source-line="100">
<li>
<p>信号类(RACSiganl)，只是表示当数据改变时，信号内部会发出数据，它本身不具备发送信号的能力，而是交给内部一个订阅者去发出。</p>
</li>
<li>
<p>默认一个信号都是冷信号，也就是值改变了，也不会触发，只有订阅了这个信号，这个信号才会变为热信号，值改变了才会触发。</p>
</li>
<li>
<p>如何订阅信号：调用信号RACSignal的subscribeNext就能订阅。</p>
</li>
</ol>
<h3 id="代码" data-source-line="107"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码"></a>代码</h3>
<pre data-source-line="110"><code class="hljs"><span class="hljs-comment">//</span>
<span class="hljs-comment">//  RACSignalViewController.m</span>
<span class="hljs-comment">//  RACSignal</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//  Created by youzu_Max on 2017/3/29.</span>
<span class="hljs-comment">//  Copyright © 2017年 youzu. All rights reserved.</span>
<span class="hljs-comment">//</span>

<span class="hljs-preprocessor">#import <span class="hljs-title">"RACSignalViewController.h"</span></span>


<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">RACSignalViewController</span> ()</span>

<span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">strong</span>) <span class="hljs-keyword">id</span> subscriber ;

<span class="hljs-keyword">@end</span>

<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">RACSignalViewController</span></span>

- (<span class="hljs-keyword">void</span>)viewDidLoad
{
    [<span class="hljs-keyword">super</span> viewDidLoad];
    <span class="hljs-keyword">self</span><span class="hljs-variable">.view</span><span class="hljs-variable">.backgroundColor</span> = [<span class="hljs-built_in">UIColor</span> whiteColor];
    
    RACSignal * signal = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) {
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"block excute"</span>);
        [subscriber sendNext:<span class="hljs-string">@"haha"</span>];
        _subscriber = subscriber ;<span class="hljs-comment">//如果不保存的话就会自动[subscriber sendCompleted];</span>

        RACDisposable * disponse = [RACDisposable disposableWithBlock:^{
            <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"当信号发送完成或者发送错误，就会自动执行这个block,执行完Block后，当前信号就不在被订阅了。"</span>);
        }];
        
        <span class="hljs-keyword">return</span> disponse ;
    }];
    
    <span class="hljs-comment">// 订阅信号</span>
    [signal subscribeNext:^(<span class="hljs-keyword">id</span>  _Nullable x) {
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,[<span class="hljs-built_in">NSString</span> stringWithFormat:<span class="hljs-string">@"receive:%@"</span>,x]);
    }];
    
    [signal subscribeNext:^(<span class="hljs-keyword">id</span>  _Nullable x) {
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,[<span class="hljs-built_in">NSString</span> stringWithFormat:<span class="hljs-string">@"receive:%@"</span>,x]);
    }];
}

- (<span class="hljs-keyword">void</span>)touchesBegan:(<span class="hljs-built_in">NSSet</span>&lt;<span class="hljs-built_in">UITouch</span> *&gt; *)touches withEvent:(<span class="hljs-built_in">UIEvent</span> *)event
{
    [_subscriber sendNext:<span class="hljs-string">@"lol"</span>];
    [_subscriber sendCompleted];
    [_subscriber sendNext:<span class="hljs-string">@"lalala"</span>]; <span class="hljs-comment">// 不会执行</span>
}</code></pre><h3 id="注意事项" data-source-line="164"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#注意事项"></a>注意事项</h3>
<ol data-source-line="165">
<li>
<p>subscriber 需要保存，不保存则自动发送结束</p>
</li>
<li>
<p>每订阅一次，创建信号方法传入的block就会被执行一次。（不想这样参考RACMulticastConnection）；</p>
</li>
<li>
<p>每次订阅，都会创建一个subscriber,一次订阅对应一个subscriber ;</p>
</li>
<li>
<p>RACSubscriber:表示订阅者的意思，用于发送信号，这是一个协议，不是一个类，只要遵守这个协议，并且实现方法才能成为订阅者。通过create创建的信号，都有一个订阅者，帮助他发送数据。</p>
</li>
<li>
<p>RACDisposable:用于取消订阅或者清理资源，当信号发送完成或者发送错误的时候，就会自动触发它。不想监听某个信号时，可以通过它主动取消订阅信号。</p>
</li>
</ol>
<h3 id="初始化方法" data-source-line="175"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#初始化方法"></a>初始化方法</h3>
<pre data-source-line="178"><code class="hljs">- (<span class="hljs-keyword">void</span>)doNext
{
    [[[[RACSignal createSignal:^RACDisposable *(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt; subscriber) {
        
        _subscriber = subscriber ;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>;
    }] doNext:^(<span class="hljs-keyword">id</span> x) {
        <span class="hljs-comment">// 执行[subscriber sendNext:@"1"];之前会调用这个Block</span>
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,[x stringByAppendingString:<span class="hljs-string">@"doNext"</span>]);
    }] doCompleted:^{
        <span class="hljs-comment">// 执行[subscriber sendCompleted];之前会调用这个Block</span>
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"doCompleted"</span>);;
        
    }] subscribeNext:^(<span class="hljs-keyword">id</span> x) {
        
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,x);
    }];
}

<span class="hljs-comment">// 设置延时</span>
- (<span class="hljs-keyword">void</span>)timeout
{
    RACSignal *signal = [[RACSignal createSignal:^RACDisposable *(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt; subscriber) {\
        
        <span class="hljs-comment">//发送一个延时请求。</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>;
    }] timeout:<span class="hljs-number">10</span> onScheduler:[RACScheduler currentScheduler]];
    
    [signal subscribeNext:^(<span class="hljs-keyword">id</span> x) {
        
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,x);
    } error:^(<span class="hljs-built_in">NSError</span> *error) {
        <span class="hljs-comment">// 10秒后会自动调用</span>
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,error);
    }];
}

<span class="hljs-comment">//定时器</span>
- (<span class="hljs-keyword">void</span>)timer
{
    [[RACSignal interval:<span class="hljs-number">1</span> onScheduler:[RACScheduler currentScheduler]] subscribeNext:^(<span class="hljs-keyword">id</span> x) {
        
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"timer : %@"</span>,x);
    }];
}

<span class="hljs-comment">//延时</span>
- (<span class="hljs-keyword">void</span>)delay
{
    [[[RACSignal createSignal:^RACDisposable *(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt; subscriber) {
        _delaySubscriber = subscriber ;
        [subscriber sendNext:@<span class="hljs-number">1</span>];
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>;
    }] delay:<span class="hljs-number">2</span>] subscribeNext:^(<span class="hljs-keyword">id</span> x) {
        
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,x);
    }];
}

<span class="hljs-comment">// 只要失败，就会重新执行创建信号中的block,直到成功</span>
- (<span class="hljs-keyword">void</span>)retry
{
    __block <span class="hljs-keyword">int</span> i = <span class="hljs-number">10</span>;
    [[[RACSignal createSignal:^RACDisposable *(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt; subscriber) {
        
        <span class="hljs-keyword">if</span> (i--) {
            <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"报一个错误"</span>);
            [subscriber sendError:<span class="hljs-literal">nil</span>];
        }
        <span class="hljs-keyword">else</span>
        {
           [subscriber sendNext:<span class="hljs-string">@"重要不报错了"</span>];
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>;
        
    }] retry] subscribeNext:^(<span class="hljs-keyword">id</span> x) {
        
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,x);
        
    } error:^(<span class="hljs-built_in">NSError</span> *error) {
        
        
    }];
}

- (<span class="hljs-keyword">void</span>)replay
{
    RACSignal *signal = [[RACSignal createSignal:^RACDisposable *(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt; subscriber) {
        
        
        [subscriber sendNext:@<span class="hljs-number">1</span>];
        [subscriber sendNext:@<span class="hljs-number">2</span>];
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>;
    }] replay];
    
    [signal subscribeNext:^(<span class="hljs-keyword">id</span> x) {
        
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"第一个订阅者%@"</span>,x);
        
    }];
    
    [signal subscribeNext:^(<span class="hljs-keyword">id</span> x) {
        
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"第二个订阅者%@"</span>,x);
        
    }];
}

<span class="hljs-comment">// 节流</span>
- (<span class="hljs-keyword">void</span>)throttle
{
    RACSubject *signal = [RACSubject subject];
    <span class="hljs-comment">// 节流，在一定时间（10秒）内，不接收任何信号内容，过了这个时间（10秒）获取最后发送的信号内容发出。</span>
    [[signal throttle:<span class="hljs-number">10</span>] subscribeNext:^(<span class="hljs-keyword">id</span> x) {
        
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,x);
    }];
}</code></pre><h2 id="2-racsubject" data-source-line="303"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#2-racsubject"></a>2 .RACSubject</h2>
<h3 id="定义-3" data-source-line="306"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#定义-3"></a>定义</h3>
<p data-source-line="308">就是一个RACSignal,集成了&lt;RACSubscriber&gt; 协议 。</p>
<h3 id="说明-2" data-source-line="310"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明-2"></a>说明</h3>
<p data-source-line="312">可以用来做代理使用</p>
<h3 id="代码-2" data-source-line="314"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-2"></a>代码</h3>
<pre data-source-line="316"><code class="hljs">RACSubject * subject = [RACSubject subject];

[subject subscribeNext:^(<span class="hljs-keyword">id</span>  _Nullable x) {
    <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,[<span class="hljs-built_in">NSString</span> stringWithFormat:<span class="hljs-string">@"张三先关注一波:%@"</span>,x]);
}];
    

[subject subscribeNext:^(<span class="hljs-keyword">id</span>  _Nullable x) {
    <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,[<span class="hljs-built_in">NSString</span> stringWithFormat:<span class="hljs-string">@"李四也关注一波:%@"</span>,x]);
}];
    
[subject sendNext:<span class="hljs-string">@"大红包"</span>];</code></pre><h3 id="代替代理的场景" data-source-line="333"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代替代理的场景"></a>代替代理的场景</h3>
<p data-source-line="335">在第二个控制器内部通过segVC改变第一个控制里的label.</p>
<h4 id="oneviewcontroller-中代码" data-source-line="337"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#oneviewcontroller-中代码"></a>OneViewController 中代码：</h4>
<pre data-source-line="338"><code class="hljs"><span class="hljs-preprocessor">#import <span class="hljs-title">"OneViewController.h"</span></span>
<span class="hljs-preprocessor">#import <span class="hljs-title">"TwoViewController.h"</span></span>

<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">OneViewController</span> ()</span>

<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">weak</span>, <span class="hljs-keyword">nonatomic</span>) <span class="hljs-keyword">IBOutlet</span> <span class="hljs-built_in">UILabel</span> *name;

<span class="hljs-keyword">@end</span>

<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">OneViewController</span></span>

- (<span class="hljs-keyword">void</span>)viewDidLoad {
    [<span class="hljs-keyword">super</span> viewDidLoad];
    <span class="hljs-comment">// Do any additional setup after loading the view from its nib.</span>
}

- (<span class="hljs-keyword">IBAction</span>)jump:(<span class="hljs-keyword">id</span>)sender
{
    TwoViewController * vc = [TwoViewController new];
    
    vc<span class="hljs-variable">.subject</span> = [RACSubject subject];
    
    [vc<span class="hljs-variable">.subject</span> subscribeNext:^(<span class="hljs-keyword">id</span>  _Nullable x) {
        
        <span class="hljs-built_in">NSNumber</span> * index = x ;
        _name<span class="hljs-variable">.text</span> = @[<span class="hljs-string">@"小明"</span>,<span class="hljs-string">@"小华"</span>,<span class="hljs-string">@"小芳"</span>][index<span class="hljs-variable">.intValue</span>];
        
    }];
    
    [<span class="hljs-keyword">self</span><span class="hljs-variable">.navigationController</span> pushViewController:vc animated:<span class="hljs-literal">YES</span>];
}


<span class="hljs-keyword">@end</span></code></pre><h4 id="twoviewcontroller-中的代码" data-source-line="376"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#twoviewcontroller-中的代码"></a>TwoViewController 中的代码</h4>
<pre data-source-line="379"><code class="hljs"><span class="hljs-variable">@interface</span> TwoViewController ()

<span class="hljs-variable">@property</span>(nonatomic ,strong) RACSubject * subject ;

<span class="hljs-variable">@end</span>


<span class="hljs-variable">@implementation</span> TwoViewController

- (void)viewDidLoad
{
    <span class="hljs-attr_selector">[super viewDidLoad]</span>;
}

- (IBAction)<span class="hljs-attribute">change</span>:(UISegmentedControl *)sender
{
    <span class="hljs-tag">if</span> (_subject)
    {
        <span class="hljs-attr_selector">[_subject sendNext:@(sender.selectedSegmentIndex)]</span>;
    }
}</code></pre><h3 id="注意" data-source-line="403"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#注意"></a>注意</h3>
<p data-source-line="405">代理拿不到回调。只能正向传值 。</p>
<h2 id="3-racreplaysubject" data-source-line="407"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#3-racreplaysubject"></a>3 . RACReplaySubject</h2>
<h4 id="定义-4" data-source-line="410"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#定义-4"></a>定义：</h4>
<p data-source-line="412">重复提供信号类，RACSubject的子类。</p>
<p data-source-line="414">RACReplaySubject与RACSubject区别:
RACReplaySubject可以先发送信号，在订阅信号，RACSubject就不可以。</p>
<h4 id="说明-3" data-source-line="417"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明-3"></a>说明 ：</h4>
<p data-source-line="419">使用场景一:如果一个信号每被订阅一次，就需要把之前的值重复发送一遍，使用重复提供信号类。</p>
<p data-source-line="421">使用场景二:可以设置capacity数量来限制缓存的value的数量,即只缓充最新的几个值。</p>
<h4 id="代码-3" data-source-line="423"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-3"></a>代码</h4>
<pre data-source-line="425"><code class="hljs">- (<span class="hljs-typename">void</span>)viewDidLoad
{
    [<span class="hljs-keyword">super</span> viewDidLoad];
    
    <span class="hljs-comment">//大家好，我是土豪</span>
    RACReplaySubject *replaySubject = [RACReplaySubject subject];
    
    <span class="hljs-comment">//张三关注了土豪</span>
    [replaySubject <span class="hljs-string">subscribeNext:</span>^(id  _Nullable x) {
        NSLog(@<span class="hljs-string">"%@"</span>,[NSString <span class="hljs-string">stringWithFormat:</span>@<span class="hljs-string">"张三收到红包：%@"</span>,x]);
    }];
    
    <span class="hljs-comment">//土豪发红包了</span>
    [replaySubject <span class="hljs-string">sendNext:</span>@<span class="hljs-string">"1个亿"</span>];
    
    <span class="hljs-comment">//李四看张三发财了也关注了土豪，并表示红包没抢到，要求重发</span>
    [replaySubject <span class="hljs-string">subscribeNext:</span>^(id  _Nullable x) {
        NSLog(@<span class="hljs-string">"%@"</span>,[NSString <span class="hljs-string">stringWithFormat:</span>@<span class="hljs-string">"李四收到红包：%@"</span>,x]);
    }];
    
    <span class="hljs-comment">//土豪表示，钱不是问题，不但重发，还把之前你没抢到的也发给你。</span>
    [replaySubject <span class="hljs-string">sendNext:</span>@<span class="hljs-string">"1毛钱"</span>];
    
}</code></pre><p data-source-line="452"><strong>log:</strong></p>
<pre data-source-line="454"><code class="hljs"><span class="hljs-number">2017</span>-<span class="hljs-number">03</span>-<span class="hljs-number">30</span> <span class="hljs-number">12</span>:<span class="hljs-number">26</span>:<span class="hljs-number">54.890</span> ReactiveCocoa[<span class="hljs-number">39418</span>:<span class="hljs-number">1278518</span>] 张三收到红包：<span class="hljs-number">1</span>个亿
<span class="hljs-number">2017</span>-<span class="hljs-number">03</span>-<span class="hljs-number">30</span> <span class="hljs-number">12</span>:<span class="hljs-number">26</span>:<span class="hljs-number">54.890</span> ReactiveCocoa[<span class="hljs-number">39418</span>:<span class="hljs-number">1278518</span>] 李四收到红包：<span class="hljs-number">1</span>个亿
<span class="hljs-number">2017</span>-<span class="hljs-number">03</span>-<span class="hljs-number">30</span> <span class="hljs-number">12</span>:<span class="hljs-number">26</span>:<span class="hljs-number">54.890</span> ReactiveCocoa[<span class="hljs-number">39418</span>:<span class="hljs-number">1278518</span>] 张三收到红包：<span class="hljs-number">1</span>毛钱
<span class="hljs-number">2017</span>-<span class="hljs-number">03</span>-<span class="hljs-number">30</span> <span class="hljs-number">12</span>:<span class="hljs-number">26</span>:<span class="hljs-number">54.891</span> ReactiveCocoa[<span class="hljs-number">39418</span>:<span class="hljs-number">1278518</span>] 李四收到红包：<span class="hljs-number">1</span>毛钱</code></pre><h2 id="4-racmulticastconnection" data-source-line="461"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#4-racmulticastconnection"></a>4 . RACMulticastConnection</h2>
<h3 id="定义-5" data-source-line="463"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#定义-5"></a>定义</h3>
<p data-source-line="465">用于当一个信号，被多次订阅时，为了保证创建信号时，避免多次调用创建信号中的block，造成副作用，可以使用这个类处理。</p>
<h3 id="说明-4" data-source-line="467"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明-4"></a>说明</h3>
<p data-source-line="469">创建： RACMulticastConnection通过RACSignal的-publish或者-muticast:方法创建.</p>
<h3 id="代码-4" data-source-line="471"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-4"></a>代码</h3>
<p data-source-line="473">NSLog(@"---&gt;%@ ,times:%zd",subscriber,++times); 只会打印一次。</p>
<pre data-source-line="475"><code class="hljs"><span class="hljs-comment">//</span>
<span class="hljs-comment">//  RACMulticastConnectionViewController.m</span>
<span class="hljs-comment">//  ReactiveCocoa</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//  Created by youzu_Max on 2017/3/30.</span>
<span class="hljs-comment">//  Copyright © 2017年 youzu. All rights reserved.</span>
<span class="hljs-comment">//</span>

<span class="hljs-preprocessor">#import <span class="hljs-title">"RACMulticastConnectionViewController.h"</span></span>

<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">RACMulticastConnectionViewController</span> ()</span>
{
    RACSignal *_signal ;
    <span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull _subscriber ;
}

<span class="hljs-keyword">@end</span>

<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">RACMulticastConnectionViewController</span></span>

- (<span class="hljs-keyword">void</span>)viewDidLoad
{
    [<span class="hljs-keyword">super</span> viewDidLoad];
    
    __block <span class="hljs-built_in">NSInteger</span> times ;
    
    RACSignal * signal = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) {
        
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"---&gt;%@ ,times:%zd"</span>,subscriber,++times);
        _subscriber = subscriber ;
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> ;
    }];
    
    
<span class="hljs-comment">//    [signal subscribeNext:^(id  _Nullable x) {</span>
<span class="hljs-comment">//        </span>
<span class="hljs-comment">//        NSLog(@"1 --&gt; %@",x);</span>
<span class="hljs-comment">//    }];</span>
<span class="hljs-comment">//    </span>
<span class="hljs-comment">//    [signal subscribeNext:^(id  _Nullable x) {</span>
<span class="hljs-comment">//        NSLog(@"2 --&gt; %@",x);</span>
<span class="hljs-comment">//    }];</span>
    
<span class="hljs-comment">//    _signal = signal ;</span>
    
    <span class="hljs-keyword">static</span> RACMulticastConnection *connect = <span class="hljs-literal">nil</span> ;
    
    <span class="hljs-keyword">if</span> (!connect)
    {
        connect = [signal publish] ;
    }
    
    [connect<span class="hljs-variable">.signal</span> subscribeNext:^(<span class="hljs-keyword">id</span>  _Nullable x) {
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"RACMulticastConnection  --&gt;   %@"</span>,x);
    }];
    
    [connect<span class="hljs-variable">.signal</span> subscribeNext:^(<span class="hljs-keyword">id</span>  _Nullable x) {
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"RACMulticastConnection  --&gt;   %@"</span>,x);
    }];
    
    [connect<span class="hljs-variable">.signal</span> subscribeNext:^(<span class="hljs-keyword">id</span>  _Nullable x) {
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"RACMulticastConnection  --&gt;   %@"</span>,x);
    }];
    
    [connect connect];
    
}

- (<span class="hljs-keyword">void</span>)touchesBegan:(<span class="hljs-built_in">NSSet</span>&lt;<span class="hljs-built_in">UITouch</span> *&gt; *)touches withEvent:(<span class="hljs-built_in">UIEvent</span> *)event
{
    [_subscriber sendNext:<span class="hljs-string">@"sendedData"</span>];
}

<span class="hljs-keyword">@end</span></code></pre><h3 id="注意-2" data-source-line="554"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#注意-2"></a>注意</h3>
<p data-source-line="556">subsciber 会给所有的订阅者发送消息。（类似与RACSubject），虽然subScriber只被保存了一次。</p>
<p data-source-line="558">点击屏幕后
<strong>log:</strong></p>
<pre data-source-line="561"><code class="hljs"><span class="hljs-number">2017</span>-<span class="hljs-number">03</span>-<span class="hljs-number">30</span> <span class="hljs-number">12</span>:<span class="hljs-number">39</span>:<span class="hljs-number">11.736</span> ReactiveCocoa[<span class="hljs-number">39608</span>:<span class="hljs-number">1284448</span>] ---&gt;&lt;RACPassthroughSubscriber: <span class="hljs-number">0x600000228b60</span>&gt; ,times:<span class="hljs-number">1</span>
<span class="hljs-number">2017</span>-<span class="hljs-number">03</span>-<span class="hljs-number">30</span> <span class="hljs-number">12</span>:<span class="hljs-number">39</span>:<span class="hljs-number">15.766</span> ReactiveCocoa[<span class="hljs-number">39608</span>:<span class="hljs-number">1284448</span>] RACMulticastConnection  --&gt;   sendedData
<span class="hljs-number">2017</span>-<span class="hljs-number">03</span>-<span class="hljs-number">30</span> <span class="hljs-number">12</span>:<span class="hljs-number">39</span>:<span class="hljs-number">15.767</span> ReactiveCocoa[<span class="hljs-number">39608</span>:<span class="hljs-number">1284448</span>] RACMulticastConnection  --&gt;   sendedData
<span class="hljs-number">2017</span>-<span class="hljs-number">03</span>-<span class="hljs-number">30</span> <span class="hljs-number">12</span>:<span class="hljs-number">39</span>:<span class="hljs-number">15.768</span> ReactiveCocoa[<span class="hljs-number">39608</span>:<span class="hljs-number">1284448</span>] RACMulticastConnection  --&gt;   sendedData</code></pre><h2 id="5-raccommand" data-source-line="568"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#5-raccommand"></a>5 .RACCommand</h2>
<h3 id="定义-6" data-source-line="571"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#定义-6"></a>定义 ：</h3>
<p data-source-line="572">RAC中用于处理事件的类。可以把事件如何处理,事件中的数据如何传递，包装到这个类中，他可以很方便的监控事件的执行过程。比如：网络请求，点击事件等。</p>
<h3 id="说明-5" data-source-line="574"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明-5"></a>说明</h3>
<p data-source-line="575">RACCommand的实例能够决定是否可以被执行，这个特性能反应在UI上，而且它能确保在其不可用时不会被执行。通常，当一个命令可以执行时，会将它的属性allowsConcurrentExecution设置为它的默认值：NO，从而确保在这个命令已经正在执行的时候，不会同时再执行新的操作。命令执行的返回值是一个RACSignal，因此我们能对该返回值进行next:，completed或error:</p>
<h3 id="代码-5" data-source-line="577"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-5"></a>代码</h3>
<pre data-source-line="579"><code class="hljs"><span class="hljs-comment">//</span>
<span class="hljs-comment">//  RACCommandViewController.m</span>
<span class="hljs-comment">//  ReactiveCocoa</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//  Created by youzu_Max on 2017/3/30.</span>
<span class="hljs-comment">//  Copyright © 2017年 youzu. All rights reserved.</span>
<span class="hljs-comment">//</span>

<span class="hljs-preprocessor">#import <span class="hljs-title">"RACCommandViewController.h"</span></span>

<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">RACCommandViewController</span> ()</span>
{
    RACCommand * _command ;
}

<span class="hljs-keyword">@end</span>

<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">RACCommandViewController</span></span>

- (<span class="hljs-keyword">void</span>)viewDidLoad
{
    [<span class="hljs-keyword">super</span> viewDidLoad];
    
    _command = [[RACCommand alloc] initWithSignalBlock:^RACSignal * _Nonnull(<span class="hljs-keyword">id</span>  _Nullable input){

        RACSignal *signal = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) {
            
            <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,input);
            MOBAWxArticleRequest * req = [MOBAWxArticleRequest wxArticleCategoryRequest];
            
            [MobAPI sendRequest:req onResult:^(MOBAResponse *response) {
                [subscriber sendNext:response<span class="hljs-variable">.responder</span>];
                [subscriber sendCompleted];
            }];
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> ;
        }] ;
        
        <span class="hljs-keyword">return</span> signal ;
        
    }];


}

- (<span class="hljs-keyword">void</span>)touchesBegan:(<span class="hljs-built_in">NSSet</span>&lt;<span class="hljs-built_in">UITouch</span> *&gt; *)touches withEvent:(<span class="hljs-built_in">UIEvent</span> *)event
{
<span class="hljs-comment">//    //先订阅</span>
<span class="hljs-comment">//    [_command.executionSignals subscribeNext:^(id  _Nullable x) {</span>
<span class="hljs-comment">//        </span>
<span class="hljs-comment">//        [x subscribeNext:^(id  _Nullable x) {</span>
<span class="hljs-comment">//            NSLog(@"normal -&gt; %@",x);</span>
<span class="hljs-comment">//        }];</span>
<span class="hljs-comment">//    }];</span>
    
    <span class="hljs-comment">//也可以这样写</span>
    [_command<span class="hljs-variable">.executionSignals</span><span class="hljs-variable">.switchToLatest</span> subscribeNext:^(<span class="hljs-keyword">id</span>  _Nullable x) {
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"vip --&gt; %@"</span>,x);
    }];


    <span class="hljs-comment">//监听command的状态</span>
    [[_command<span class="hljs-variable">.executing</span> skip:<span class="hljs-number">1</span>] subscribeNext:^(<span class="hljs-built_in">NSNumber</span> * _Nullable x) {
        <span class="hljs-keyword">if</span> (x<span class="hljs-variable">.boolValue</span>)
        {
            <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"excuting..."</span>);
        }
        <span class="hljs-keyword">else</span>
        {
            <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"not excuted"</span>);
        }
    }];
    
    <span class="hljs-comment">//在执行</span>
    [_command execute:<span class="hljs-string">@"参数"</span>];
    
}

<span class="hljs-keyword">@end</span></code></pre><h3 id="注意-3" data-source-line="661"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#注意-3"></a>注意</h3>
<ol data-source-line="662">
<li>
<p>RACommand本身也是信号类, 属性executionSignals是一个信号中的信号
所以command执行，我得到的数据x时一个RACSignal包装的数据。需要再次订阅这个signal才能拿到数据。</p>
</li>
<li>
<p>以下初始化方法可以创建一个信号觉得command的状态是执行还是不可执行的。</p>
</li>
</ol>
<pre data-source-line="667"><code class="hljs"><span class="hljs-pp">- <span class="hljs-params">(instancetype)</span>initWithEnabled:<span class="hljs-params">(nullable <span class="hljs-variable">RACSignal</span>&lt;<span class="hljs-variable">NSNumber</span> *&gt; *)</span>enabledSignal signalBlock:<span class="hljs-params">(<span class="hljs-variable">RACSignal</span>&lt;<span class="hljs-variable">ValueType</span>&gt; * (^)</span><span class="hljs-params">(<span class="hljs-variable">InputType</span> <span class="hljs-variable">_Nullable</span> input)</span>)signalBlock;</span></code></pre><h2 id="6-others" data-source-line="671"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#6-others"></a>6 . others</h2>
<h4 id="1-ractuple元组类" data-source-line="674"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#1-ractuple元组类"></a>1. RACTuple:元组类</h4>
<p data-source-line="676">类似NSArray,用来包装值.</p>
<h4 id="2-racsequence集合类" data-source-line="678"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#2-racsequence集合类"></a>2. RACSequence:集合类</h4>
<p data-source-line="680">用于代替NSArray,NSDictionary,可以使用它来快速遍历数组和字典。</p>
<h4 id="3-racscheduler" data-source-line="682"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#3-racscheduler"></a>3. RACScheduler</h4>
<p data-source-line="684">针对RAC中的队列，GCD的封装。</p>
<h4 id="4-racevent" data-source-line="686"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#4-racevent"></a>4. RACEvent</h4>
<p data-source-line="688">把数据包装成信号事件(signalevent)。它主要通过RACSignal的-materialize来使用，然并卵</p>
<h4 id="4-racunit" data-source-line="690"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#4-racunit"></a>4. RACUnit</h4>
<p data-source-line="692">表⽰stream不包含有意义的值,也就是看到这个，可以直接理解为nil.</p>
<h4 id="实例代码" data-source-line="694"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#实例代码"></a>实例代码</h4>
<pre data-source-line="696"><code class="hljs">// <span class="hljs-number">1.</span>遍历数组
    NSArray *numbers = <span class="hljs-constant">@[</span><span class="hljs-constant">@1</span>,<span class="hljs-constant">@2</span>,<span class="hljs-constant">@3</span>,<span class="hljs-constant">@4]</span><span class="hljs-comment">;</span>
    
    [numbers.rac_sequence.signal subscribeNext:^(id x) {

        NSLog(@<span class="hljs-string">"%@"</span>,x)<span class="hljs-comment">;</span>
    }]<span class="hljs-comment">;</span></code></pre><pre data-source-line="706"><code class="hljs"><span class="hljs-comment">// 2.遍历字典,遍历出来的键值对会包装成RACTuple(元组对象)</span>
    <span class="hljs-built_in">NSDictionary</span> *dict = @{<span class="hljs-string">@"1"</span>:<span class="hljs-string">@"a"</span>,<span class="hljs-string">@"2"</span>:<span class="hljs-string">@"b"</span>};
    [dict<span class="hljs-variable">.rac_sequence</span><span class="hljs-variable">.signal</span> subscribeNext:^(RACTuple *x) {

        <span class="hljs-comment">// 解包元组，会把元组的值，按顺序给参数里面的变量赋值</span>
        RACTupleUnpack(<span class="hljs-built_in">NSString</span> *key,<span class="hljs-built_in">NSString</span> *value) = x;

        <span class="hljs-comment">// 相当于以下写法</span>
<span class="hljs-comment">//        NSString *key = x[0];</span>
<span class="hljs-comment">//        NSString *value = x[1];</span>

        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@ %@"</span>,key,value);

    }];</code></pre><h2 id="7-rac-常用方法" data-source-line="724"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#7-rac-常用方法"></a>7 . RAC 常用方法</h2>
<h4 id="1-rac_signalforselector" data-source-line="727"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#1-rac_signalforselector"></a>1. rac_signalForSelector</h4>
<p data-source-line="729">NSObject的分类，hook的方式 ，返回参数x是原方法传入参数的tuple</p>
<pre data-source-line="732"><code class="hljs"><span class="hljs-collection">[<span class="hljs-collection">[self rac_signalForSelector:@selector<span class="hljs-list">(<span class="hljs-keyword">btnClick:</span>)</span>]</span> subscribeNext:^<span class="hljs-list">(<span class="hljs-keyword">id</span> x)</span> <span class="hljs-collection">{
        NSLog<span class="hljs-list">(@<span class="hljs-string">"%@"</span>,x)</span><span class="hljs-comment">;</span>
    }</span>]</span><span class="hljs-comment">;</span></code></pre><h4 id="2-rac_valuesandchangesforkeypath" data-source-line="739"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#2-rac_valuesandchangesforkeypath"></a>2. rac_valuesAndChangesForKeyPath</h4>
<p data-source-line="741">KVO的RAC写法</p>
<pre data-source-line="744"><code class="hljs"><span class="hljs-collection">[<span class="hljs-collection">[self rac_valuesAndChangesForKeyPath:@<span class="hljs-string">"center"</span> options:NSKeyValueObservingOptionNew observer:nil]</span> subscribeNext:^<span class="hljs-list">(<span class="hljs-keyword">id</span> x)</span> <span class="hljs-collection">{

        NSLog<span class="hljs-list">(@<span class="hljs-string">"%@"</span>,x)</span><span class="hljs-comment">;</span>

    }</span>]</span><span class="hljs-comment">;</span></code></pre><h4 id="3-rac_signalforcontrolevents" data-source-line="753"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#3-rac_signalforcontrolevents"></a>3. rac_signalForControlEvents</h4>
<p data-source-line="754">把事件封装成singnal</p>
<pre data-source-line="756"><code class="hljs"><span class="hljs-collection">[<span class="hljs-collection">[btn rac_signalForControlEvents:UIControlEventTouchUpInside]</span> subscribeNext:^<span class="hljs-list">(<span class="hljs-keyword">id</span> x)</span> <span class="hljs-collection">{

        NSLog<span class="hljs-list">(@<span class="hljs-string">"%@"</span>，x)</span><span class="hljs-comment">;</span>
    }</span>]</span><span class="hljs-comment">;</span></code></pre><h4 id="4-rac_addobserverforname" data-source-line="764"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#4-rac_addobserverforname"></a>4. rac_addObserverForName</h4>
<p data-source-line="765">RAC 的通知写法</p>
<pre data-source-line="767"><code class="hljs"><span class="hljs-collection">[<span class="hljs-collection">[<span class="hljs-collection">[NSNotificationCenter defaultCenter]</span> rac_addObserverForName:UIKeyboardWillShowNotification object:nil]</span> subscribeNext:^<span class="hljs-list">(<span class="hljs-keyword">id</span> x)</span> <span class="hljs-collection">{
        NSLog<span class="hljs-list">(@<span class="hljs-string">"%@"</span>,x)</span><span class="hljs-comment">;</span>
    }</span>]</span><span class="hljs-comment">;</span></code></pre><h4 id="5-rac_textsignal" data-source-line="773"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#5-rac_textsignal"></a>5. rac_textSignal</h4>
<p data-source-line="774">监听文本框文字改变
只要文本框发出改变就会发出这个信号。</p>
<pre data-source-line="777"><code class="hljs"><span class="hljs-collection">[_textField.rac_textSignal subscribeNext:^<span class="hljs-list">(<span class="hljs-keyword">id</span> x)</span> <span class="hljs-collection">{

       NSLog<span class="hljs-list">(@<span class="hljs-string">"文字改变了%@"</span>,x)</span><span class="hljs-comment">;</span>
   }</span>]</span><span class="hljs-comment">;</span></code></pre><h4 id="6-rac_liftselectorwithsignalsfromarraysignals" data-source-line="785"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#6-rac_liftselectorwithsignalsfromarraysignals"></a>6. rac_liftSelector:withSignalsFromArray:Signals:</h4>
<p data-source-line="786">当传入的Signals(信号数组)，每一个signal都至少sendNext过一次，就会去触发第一个selector参数的方法。</p>
<pre data-source-line="789"><code class="hljs">RACSignal *req1 = [RACSignal createSignal:^RACDisposable *(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt; subscriber) {

        <span class="hljs-comment">// 发送请求</span>
        [subscriber sendNext:<span class="hljs-string">@"1"</span>];
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>;
    }];
    
        RACSignal *req2 = [RACSignal createSignal:^RACDisposable *(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt; subscriber) {
        <span class="hljs-comment">// 发送请求</span>
        [subscriber sendNext:<span class="hljs-string">@"2"</span>];
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>;
    }];

    <span class="hljs-comment">// 使用注意：几个信号，参数一的方法就几个参数，每个参数对应信号发出的数据。</span>
    [<span class="hljs-keyword">self</span> rac_liftSelector:<span class="hljs-keyword">@selector</span>(update<span class="hljs-built_in">UIWith1</span>:<span class="hljs-number">2</span>:) withSignalsFromArray:@[request1,request2]];


}
<span class="hljs-comment">// 更新UI</span>
- (<span class="hljs-keyword">void</span>)update<span class="hljs-built_in">UIWith1</span>:(<span class="hljs-keyword">id</span>)x1 <span class="hljs-number">2</span>:(<span class="hljs-keyword">id</span>)x2
{
    <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@  %@"</span>,x1,x2);
}</code></pre><h4 id="7-map-和-flattenmap-映射" data-source-line="815"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#7-map-和-flattenmap-映射"></a>7. map 和 flattenMap （映射）</h4>
<p data-source-line="817">通过此方法可以在拿到信号发送的数据前 执行一些操作 在把我们操作操作过的值发送出去。</p>
<pre data-source-line="820"><code class="hljs">RACSignal *signal = [<span class="hljs-keyword">self</span><span class="hljs-variable">.textFiled</span><span class="hljs-variable">.rac_textSignal</span> map:^<span class="hljs-keyword">id</span> _Nullable(<span class="hljs-built_in">NSString</span> * _Nullable value) {
        <span class="hljs-keyword">return</span> [value stringByAppendingString:<span class="hljs-string">@"+修改一下"</span>];
    }];
    
    [signal subscribeNext:^(<span class="hljs-keyword">id</span>  _Nullable x) {
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,x);
    }];</code></pre><pre data-source-line="831"><code class="hljs"></code></pre><p data-source-line="838">注意 ：信号数组的长度等于@selector的方法参数数量，响应方法的时候会被一一填充。</p>
<h2 id="8-racsignal常见操作方法" data-source-line="840"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#8-racsignal常见操作方法"></a>8 . RACSignal常见操作方法</h2>
<h3 id="1-concat" data-source-line="842"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#1-concat"></a>1. concat :</h3>
<p data-source-line="844">按一定顺序拼接信号，当多个信号发出的时候，有顺序的接收信号。</p>
<h4 id="代码-6" data-source-line="846"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-6"></a>代码：</h4>
<pre data-source-line="847"><code class="hljs"><span class="hljs-comment">//按一定顺序拼接信号，当多个信号发出的时候，有顺序的接收信号。</span>
- (<span class="hljs-keyword">IBAction</span>)concat:(<span class="hljs-keyword">id</span>)sender
{
    <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"****************** concat ******************"</span>);
    
    <span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  __block subscriberA ;
    <span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  __block subscriberB ;
    
    RACSignal * signalA = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) {
        subscriberA = subscriber ;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> ;
    }];
    
    RACSignal * signalB = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) {
        subscriberB = subscriber ;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> ;
    }];
    
    RACSignal *concatSignal = [signalA concat:signalB] ;
    [concatSignal subscribeNext:^(<span class="hljs-keyword">id</span>  _Nullable x) {
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"concat:%@"</span>,x);
    }];
    
    [subscriberA sendNext:<span class="hljs-string">@"A"</span>];
    [subscriberA sendCompleted];<span class="hljs-comment">//一定要调complete</span>
    
    [subscriberB sendNext:<span class="hljs-string">@"B"</span>];

}</code></pre><h4 id="说明-6" data-source-line="878"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明-6"></a>说明：</h4>
<p data-source-line="879">如果subscriberB 先发送则不会有任何打印消息。</p>
<h3 id="2-then" data-source-line="881"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#2-then"></a>2. then :</h3>
<p data-source-line="882">用于连接两个信号，当第一个信号完成，才会连接then返回的信号。</p>
<h4 id="代码-7" data-source-line="883"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-7"></a>代码</h4>
<pre data-source-line="884"><code class="hljs"><span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"****************** then ******************"</span>);
    <span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  __block subscriberA ;
    <span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  __block subscriberThen ;
    
    RACSignal * signalA = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) {
        subscriberA = subscriber ;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> ;
    }];
    
    RACSignal * signalThen = [signalA then:^RACSignal * _Nonnull{
        <span class="hljs-keyword">return</span> [RACSignal createSignal:^RACDisposable * _Nullable(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) {
            subscriberThen = subscriber ;
            <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> ;
        }];
    }];
    
    <span class="hljs-comment">//  A的订阅会被忽略掉。</span>
    [signalA subscribeNext:^(<span class="hljs-keyword">id</span>  _Nullable x) {
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,x);
    }];
    
    [signalThen subscribeNext:^(<span class="hljs-keyword">id</span>  _Nullable x) {
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,x);
    }];
    
    [subscriberA sendNext:<span class="hljs-string">@"A"</span>];
    [subscriberA sendCompleted];<span class="hljs-comment">//一定要调complete</span>
    
    [subscriberThen sendNext:<span class="hljs-string">@"B"</span>];
    [subscriberThen sendCompleted];</code></pre><h4 id="说明-7" data-source-line="917"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明-7"></a>说明</h4>
<p data-source-line="918">A发送完成后一定要调sendCompleted ；
A的订阅会被忽略。只有then信号的订阅收到信号。</p>
<h3 id="3-merge" data-source-line="922"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#3-merge"></a>3. merge ：</h3>
<p data-source-line="923">把多个信号合并为一个信号，任何一个信号有新值的时候就会调用.</p>
<h4 id="代码-8" data-source-line="924"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-8"></a>代码</h4>
<pre data-source-line="926"><code class="hljs"><span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"****************** merge ******************"</span>);
    <span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  __block subscriberA ;
    <span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  __block subscriberB ;
    
    RACSignal * signalA = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) {
        subscriberA = subscriber ;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> ;
    }];
    
    RACSignal * signalB = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) {
        subscriberB = subscriber ;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> ;
    }];
    
    <span class="hljs-comment">// 合并信号,任何一个信号发送数据，都能监听到.</span>
    RACSignal *mergeSignal = [signalA merge:signalB];
    
    [mergeSignal subscribeNext:^(<span class="hljs-keyword">id</span> x) {
        
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,x);
        
    }];
    
    [subscriberA sendNext:<span class="hljs-string">@"A sended"</span>];
    [subscriberB sendNext:<span class="hljs-string">@"B sended"</span>];</code></pre><h3 id="4-zipwith" data-source-line="954"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#4-zipwith"></a>4. zipWith:</h3>
<h4 id="把2个信号合并成一个信号2个信号都发送时zip信号才会发送消息" data-source-line="956"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#把2个信号合并成一个信号2个信号都发送时zip信号才会发送消息"></a>把2个信号合并成一个信号，2个信号都发送时，zip信号才会发送消息。</h4>
<pre data-source-line="959"><code class="hljs">NSLog(@"****************** zipWith ******************")<span class="hljs-comment">;</span>
    id&lt;RACSubscriber&gt;  __block subscriberA <span class="hljs-comment">;</span>
    id&lt;RACSubscriber&gt;  __block subscriberB <span class="hljs-comment">;</span>
    
    RACSignal * signalA = [RACSignal createSignal:^RACDisposable * _Nullable(id&lt;RACSubscriber&gt;  _Nonnull subscriber) {
        subscriberA = subscriber <span class="hljs-comment">;</span>
        return nil <span class="hljs-comment">;</span>
    }]<span class="hljs-comment">;</span>
    
    RACSignal * signalB = [RACSignal createSignal:^RACDisposable * _Nullable(id&lt;RACSubscriber&gt;  _Nonnull subscriber) {
        subscriberB = subscriber <span class="hljs-comment">;</span>
        return nil <span class="hljs-comment">;</span>
    }]<span class="hljs-comment">;</span>
    
    // 合并信号,任何一个信号发送数据，都能监听到.
    RACSignal *zipSignal = [signalA zipWith:signalB]<span class="hljs-comment">;</span>
    
    [zipSignal subscribeNext:^(id x) {
        
        NSLog(@"%@",x)<span class="hljs-comment">;</span>
        
    }]<span class="hljs-comment">;</span>
    
    [subscriberA sendNext:@"<span class="hljs-keyword">A</span> sended"]<span class="hljs-comment">;</span>
    [subscriberB sendNext:@"B sended"]<span class="hljs-comment">;</span>
    [subscriberA sendNext:@"<span class="hljs-keyword">A</span> sended2"]<span class="hljs-comment">;</span>
    [subscriberB sendNext:@"B sended2"]<span class="hljs-comment">;</span></code></pre><h3 id="5-combinelatest" data-source-line="989"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#5-combinelatest"></a>5. combineLatest:</h3>
<p data-source-line="990">将多个信号合并起来，并且拿到各个信号的最新的值,必须每个合并的signal至少都有过一次sendNext，才会触发合并的信号。</p>
<h4 id="代码-9" data-source-line="991"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-9"></a>代码</h4>
<pre data-source-line="993"><code class="hljs">NSLog(@"****************** combineLatest ******************")<span class="hljs-comment">;</span>
    id&lt;RACSubscriber&gt;  __block subscriberA <span class="hljs-comment">;</span>
    id&lt;RACSubscriber&gt;  __block subscriberB <span class="hljs-comment">;</span>
    id&lt;RACSubscriber&gt;  __block subscriberC <span class="hljs-comment">;</span>
    
    RACSignal * signalA = [RACSignal createSignal:^RACDisposable * _Nullable(id&lt;RACSubscriber&gt;  _Nonnull subscriber) {
        subscriberA = subscriber <span class="hljs-comment">;</span>
        return nil <span class="hljs-comment">;</span>
    }]<span class="hljs-comment">;</span>
    
    RACSignal * signalB = [RACSignal createSignal:^RACDisposable * _Nullable(id&lt;RACSubscriber&gt;  _Nonnull subscriber) {
        subscriberB = subscriber <span class="hljs-comment">;</span>
        return nil <span class="hljs-comment">;</span>
    }]<span class="hljs-comment">;</span>
    
    RACSignal * signalC = [RACSignal createSignal:^RACDisposable * _Nullable(id&lt;RACSubscriber&gt;  _Nonnull subscriber) {
        subscriberC = subscriber <span class="hljs-comment">;</span>
        return nil <span class="hljs-comment">;</span>
    }]<span class="hljs-comment">;</span>
    
    // 合并信号,任何一个信号发送数据，都能监听到.
//    RACSignal *combineSignal = [[signalA combineLatestWith:signalB] combineLatestWith:signalC]<span class="hljs-comment">;</span>
    
    RACSignal *combineSignal = [RACSignal combineLatest:@[signalA,signalB,signalC]]<span class="hljs-comment">;</span>

    [combineSignal subscribeNext:^(id x) {
        
        NSLog(@"%@",x)<span class="hljs-comment">;</span>
        
    }]<span class="hljs-comment">;</span>
    
    [subscriberA sendNext:@"<span class="hljs-keyword">A</span> sended"]<span class="hljs-comment">;</span>
    [subscriberA sendNext:@"<span class="hljs-keyword">A</span> sended 2"]<span class="hljs-comment">;</span>
    
    [subscriberB sendNext:@"B sended"]<span class="hljs-comment">;</span>
    
    [subscriberC sendNext:@"C sended"]<span class="hljs-comment">;</span>
    [subscriberC sendNext:@"C sended 2"]<span class="hljs-comment">;</span></code></pre><h4 id="说明-8" data-source-line="1034"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明-8"></a>说明</h4>
<p data-source-line="1035">对比与zipWith,它会不停的更新为最新的值。</p>
<h3 id="6-reduce" data-source-line="1037"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#6-reduce"></a>6. reduce:</h3>
<p data-source-line="1038">就是combine 发送的信号 在reduce block里面处理后发送出去。</p>
<pre data-source-line="1041"><code class="hljs">- (<span class="hljs-keyword">IBAction</span>)reduce:(<span class="hljs-keyword">id</span>)sender
{
    
    <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"****************** combineLatest ******************"</span>);
    <span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  __block subscriberA ;
    <span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  __block subscriberB ;
    <span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  __block subscriberC ;
    
    RACSignal * signalA = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) {
        subscriberA = subscriber ;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> ;
    }];
    
    RACSignal * signalB = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) {
        subscriberB = subscriber ;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> ;
    }];
    
    RACSignal * signalC = [RACSignal createSignal:^RACDisposable * _Nullable(<span class="hljs-keyword">id</span>&lt;RACSubscriber&gt;  _Nonnull subscriber) {
        subscriberC = subscriber ;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> ;
    }];
    
    <span class="hljs-comment">// 合并信号,任何一个信号发送数据，都能监听到.</span>
    <span class="hljs-comment">//    RACSignal *combineSignal = [[signalA combineLatestWith:signalB] combineLatestWith:signalC];</span>
    
    RACSignal *combineSignal = [RACSignal combineLatest:@[signalA,signalB,signalC] reduce:^<span class="hljs-keyword">id</span>(<span class="hljs-built_in">NSString</span> *a,<span class="hljs-built_in">NSString</span> *b,<span class="hljs-built_in">NSString</span> *c){
        
        <span class="hljs-keyword">return</span> [@[a,b,c] componentsJoinedByString:<span class="hljs-string">@" + "</span>];
    }];
    
    [combineSignal subscribeNext:^(<span class="hljs-keyword">id</span> x) {
        
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"%@"</span>,x);
        
    }];
    
    [subscriberA sendNext:<span class="hljs-string">@"A sended"</span>];
    [subscriberA sendNext:<span class="hljs-string">@"A sended 2"</span>];
    
    [subscriberB sendNext:<span class="hljs-string">@"B sended"</span>];
    
    [subscriberC sendNext:<span class="hljs-string">@"C sended"</span>];
    [subscriberC sendNext:<span class="hljs-string">@"C sended 2"</span>];
}</code></pre><h3 id="7-filter" data-source-line="1090"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#7-filter"></a>7. filter ：</h3>
<p data-source-line="1091">过滤信号，使用它可以获取满足条件的信号</p>
<h4 id="代码-10" data-source-line="1093"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-10"></a>代码</h4>
<pre data-source-line="1094"><code class="hljs"><span class="hljs-comment">/* 过滤信号，使用它可以获取满足条件的信号 */</span>
    [[_textField<span class="hljs-variable">.rac_textSignal</span> filter:^<span class="hljs-built_in">BOOL</span>(<span class="hljs-built_in">NSString</span> * _Nullable value) {
        <span class="hljs-keyword">return</span> value<span class="hljs-variable">.length</span> &gt; <span class="hljs-number">3</span> ;
    }] subscribeNext:^(<span class="hljs-built_in">NSString</span> * _Nullable x) {
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"filter -&gt; %@"</span>,x);
    }];</code></pre><h3 id="8-ignore" data-source-line="1103"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#8-ignore"></a>8. ignore ：</h3>
<p data-source-line="1104">忽略完某些值的信号</p>
<h4 id="代码-11" data-source-line="1106"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-11"></a>代码</h4>
<pre data-source-line="1109"><code class="hljs"><span class="hljs-collection">[<span class="hljs-collection">[_textField.rac_textSignal ignore:@<span class="hljs-string">"MOB"</span>]</span> subscribeNext:^<span class="hljs-list">(<span class="hljs-keyword">NSString</span> * _Nullable x)</span> <span class="hljs-collection">{
        NSLog<span class="hljs-list">(@<span class="hljs-string">"ignore -&gt;%@"</span>,x)</span><span class="hljs-comment">;</span>
    }</span>]</span><span class="hljs-comment">;</span></code></pre><h3 id="9-distinctuntilchanged" data-source-line="1114"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#9-distinctuntilchanged"></a>9. distinctUntilChanged</h3>
<p data-source-line="1115">当上一次的值和当前的值有明显的变化就会发出信号，否则会被忽略掉</p>
<h4 id="代码-12" data-source-line="1116"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-12"></a>代码</h4>
<pre data-source-line="1118"><code class="hljs"><span class="hljs-collection">[<span class="hljs-collection">[_textField.rac_textSignal distinctUntilChanged]</span> subscribeNext:^<span class="hljs-list">(<span class="hljs-keyword">id</span> x)</span> <span class="hljs-collection">{
        
        NSLog<span class="hljs-list">(@<span class="hljs-string">"distinctUntilChanged -&gt; %@"</span>,x)</span><span class="hljs-comment">;</span>
    }</span>]</span><span class="hljs-comment">;</span></code></pre><h3 id="10-taketakelast" data-source-line="1126"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#10-taketakelast"></a>10. take/takeLast</h3>
<p data-source-line="1128">取前几次 / 取最后几次  发送的信号</p>
<h4 id="代码-13" data-source-line="1130"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-13"></a>代码</h4>
<pre data-source-line="1133"><code class="hljs"><span class="hljs-collection">[<span class="hljs-collection">[_textField.rac_textSignal take:2]</span> subscribeNext:^<span class="hljs-list">(<span class="hljs-keyword">NSString</span> * _Nullable x)</span> <span class="hljs-collection">{
        NSLog<span class="hljs-list">(@<span class="hljs-string">"take -&gt; %@"</span>,x)</span><span class="hljs-comment">;</span>
    }</span>]</span><span class="hljs-comment">;</span>
    
   <span class="hljs-collection">[<span class="hljs-collection">[_textField.rac_textSignal takeLast :<span class="hljs-number">3</span>]</span> subscribeNext:^<span class="hljs-list">(<span class="hljs-keyword">NSString</span> * _Nullable x)</span> <span class="hljs-collection">{
        NSLog<span class="hljs-list">(@<span class="hljs-string">"takeLast -&gt; %@"</span>,x)</span><span class="hljs-comment">;</span>
    }</span>]</span><span class="hljs-comment">;</span></code></pre><h4 id="说明-9" data-source-line="1142"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#说明-9"></a>说明</h4>
<p data-source-line="1143">takeLast 一定要调用sendComplete。不然不知道什么是结束。也就没有最后的概念。返回的是tuple</p>
<h3 id="11-skip" data-source-line="1145"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#11-skip"></a>11. skip</h3>
<p data-source-line="1146">跳过几次信号发送</p>
<h4 id="代码-14" data-source-line="1148"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#代码-14"></a>代码</h4>
<pre data-source-line="1150"><code class="hljs"><span class="hljs-collection">[<span class="hljs-collection">[_textField.rac_textSignal skip:2]</span> subscribeNext:^<span class="hljs-list">(<span class="hljs-keyword">NSString</span> * _Nullable x)</span> <span class="hljs-collection">{
        NSLog<span class="hljs-list">(@<span class="hljs-string">"skip -&gt; %@"</span>,x)</span><span class="hljs-comment">;</span>
    }</span>]</span><span class="hljs-comment">;</span></code></pre><h2 id="9-rac-常用的宏" data-source-line="1157"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#9-rac-常用的宏"></a>9 .RAC 常用的宏</h2>
<h3 id="1-ractarget" data-source-line="1160"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#1-ractarget"></a>1. RAC(TARGET, ...)</h3>
<pre data-source-line="1162"><code class="hljs"><span class="hljs-comment">// content属性值随着输入框值得变化而变化。</span>
    <span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span> ,<span class="hljs-keyword">copy</span>) <span class="hljs-built_in">NSString</span> *content ;
    
    RAC(<span class="hljs-keyword">self</span>,content) = _textField<span class="hljs-variable">.rac_textSignal</span> ;</code></pre><h3 id="2racobservetarget-keypath" data-source-line="1169"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#2racobservetarget-keypath"></a>2.RACObserve(&lt;#TARGET#&gt;, &lt;#KEYPATH#&gt;)</h3>
<pre data-source-line="1171"><code class="hljs"><span class="hljs-collection">[RACObserve<span class="hljs-list">(<span class="hljs-keyword">self</span>, content)</span> subscribeNext:^<span class="hljs-list">(<span class="hljs-keyword">id</span>  _Nullable x)</span> <span class="hljs-collection">{
        NSLog<span class="hljs-list">(@<span class="hljs-string">"%@"</span>,x)</span><span class="hljs-comment">;</span>
    }</span>]</span><span class="hljs-comment">;</span></code></pre><h3 id="3-weakifyself和strongifyself" data-source-line="1177"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#3-weakifyself和strongifyself"></a>3. @weakify(self)和@strongify(self)</h3>
<p data-source-line="1179">一定要配套使用，实现原理：</p>
<pre data-source-line="1182"><code class="hljs">@weakify(<span class="hljs-keyword">self</span>);
    [[<span class="hljs-keyword">self</span> rac_signalForSelector:<span class="hljs-keyword">@selector</span>(touchesBegan:withEvent:)] subscribeNext:^(<span class="hljs-keyword">id</span>  _Nullable x) {
        @strongify(<span class="hljs-keyword">self</span>);
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@" test ----&gt; %@"</span>,x);
    }];
    
    __<span class="hljs-keyword">weak</span> <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">self</span>) weakSelf = <span class="hljs-keyword">self</span> ;
    [[<span class="hljs-keyword">self</span> rac_signalForSelector:<span class="hljs-keyword">@selector</span>(touchesBegan:withEvent:)] subscribeNext:^(<span class="hljs-keyword">id</span>  _Nullable x) {
        <span class="hljs-keyword">id</span> <span class="hljs-keyword">self</span> = weakSelf ;
        
        <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@" test ----&gt; %@"</span>,x);
    }];</code></pre><h3 id="4-ractuplepack-ractupleunpack" data-source-line="1198"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#4-ractuplepack-ractupleunpack"></a>4. RACTuplePack(...) /  RACTupleUnpack(...)</h3>
<p data-source-line="1200">把数据包装成元组类/解析元组</p>
<pre data-source-line="1203"><code class="hljs">RACTuple *tuple = RACTuplePack<span class="hljs-list">(@<span class="hljs-string">"1314"</span>,@<span class="hljs-number">20</span>)</span><span class="hljs-comment">;</span>
    
    RACTupleUnpack<span class="hljs-list">(<span class="hljs-keyword">NSString</span> <span class="hljs-variable">*a,NSNumber *</span>b)</span> = tuple<span class="hljs-comment">;</span>

    NSLog<span class="hljs-list">(@<span class="hljs-string">"%@,%@"</span>,a,b)</span><span class="hljs-comment">;</span></code></pre><h1 id="reactive-50-更新" data-source-line="1211"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#reactive-50-更新"></a>Reactive 5.0 更新</h1>
<p data-source-line="1214">参考自：<a href="http://www.cocoachina.com/ios/20161116/18104.html">http://www.cocoachina.com/ios/20161116/18104.html</a></p>
<p data-source-line="1216">RAC 5.0 相比于 4.0 有了巨大的变化，不仅是受 swift 3.0 大升级的影响，RAC 对自身项目结构的也进行了大幅度的调整。这个调整就是将 RAC 拆分为四个库：ReactiveCocoa、ReactiveSwift、ReactiveObjC、ReactiveObjCBridge。</p>
<h3 id="reactivecocoa" data-source-line="1218"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#reactivecocoa"></a>ReactiveCocoa</h3>
<p data-source-line="1220">现在的 RAC 注意力主要集中在 Swift 和 UI 层上，将原来一个基于 RAC 面向 UI 层的扩展库 Rex 合并进了 RAC 。</p>
<p data-source-line="1222">RAC 3 和 4 的主要精力在围绕 Swift 重新打造一个响应式编程库。因为这部分的核心 API 已经很成熟，所以现在将重心放在为 AppKit 和 UIKit 提供一些更好用的扩展上。</p>
<h3 id="reactiveswift" data-source-line="1224"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#reactiveswift"></a>ReactiveSwift</h3>
<p data-source-line="1226">原来 RAC 中只和 Swift 平台相关的核心代码被单独抽取成了一个新框架：ReactiveSwift 。</p>
<p data-source-line="1228">Swift 正在快速成长并且成长为一个跨平台的语言。把只和 Swift 相关的代码抽取出来后，ReactiveSwift 就可以在其他平台上被使用，而不只是局限在 CocoaTouch 和 Cocoa 中。</p>
<h3 id="reactiveobjc" data-source-line="1230"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#reactiveobjc"></a>ReactiveObjC</h3>
<p data-source-line="1232">在 RAC 3 和 4 中，RAC 也包含了 RAC 2 中的 OC 代码。现在这部分代码被移到了 ReactiveObjC 。</p>
<p data-source-line="1234">这样做的原因是因为两个库虽然有着一样的核心编程范式，实际上却是完全独立的两套 API 。实际的使用中，RAC 4 和 RAC 2 是完全不同的两组用户群，并且维护的团队其实也是两组。之前混在一个库里也增加了管理的复杂度。拆分出去后也可以更加自由的维护 ReactiveObjC 。</p>
<h3 id="reactiveobjcbridge" data-source-line="1236"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#reactiveobjcbridge"></a>ReactiveObjCBridge</h3>
<p data-source-line="1238">在把 Swift 和 OC 的库拆分之后问题来了，并不是所有的库都是纯 OC 和 Swift 的。有相当大一部分项目处于 OC 迁移到 Swift 过程中，其中可能使用 Swift 调用了 RAC 2 中基于 OC 写的 API。为了解决这部分用户的问题，所以有了 ReactiveObjCBridge 。</p>
<h3 id="大量的api的改变和重命名" data-source-line="1240"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#大量的api的改变和重命名"></a>大量的Api的改变和重命名。</h3>
<p data-source-line="1242">比如API 都放在了 reactive 后。不再是原先的 rac_xx 。
增加了生命周期 lifetime 的属性等等 。</p>
<h3 id="最后" data-source-line="1246"><a class="markdownIt-Anchor" href="http://note.youdao.com/md/preview/preview.html?file=%2Fyws%2Fapi%2Fpersonal%2Ffile%2FWEBc9a5932a2a496db067acc1d84e89ab1f%0A%20%20%20%20%20%20%3Fmethod%3Ddownload%26read%3Dtrue%26shareKey%3D4d19707e55749f23b8c3f7e54d15937f#最后"></a>最后 ？</h3>
<p data-source-line="1248"><img src="./Markdown Preview_files/1479260442604874.jpg" alt="image"></p>
</article>


</body></html>